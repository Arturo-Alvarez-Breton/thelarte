<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Usuarios - Thelarte</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brandBrown: '#59391B',
                        brandGold: '#7B5222'
                    },
                    fontFamily: {
                        serifTitle: ['"Playfair Display"', 'serif'],
                        cursiveLogo: ['"Itim"', 'cursive']
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@300;400;500;600;700&family=Itim&display=swap" rel="stylesheet"/>
    <script type="module" src="/js/usuario/index.js" defer></script>
</head>
<body class="font-inter bg-gray-50 min-h-screen flex">
<main class="flex-1 flex flex-col ml-0 md:ml-64 p-6">
    <div class="container mx-auto max-w-7xl">

        <!-- Cabecera -->
        <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-8 gap-4">
            <div>
                <h1 class="text-2xl font-bold text-brandGold">Gesti√≥n de Usuarios</h1>
                <p class="text-gray-600 mt-1">Administra la informaci√≥n de tus usuarios registrados</p>
            </div>
            <div class="flex flex-col sm:flex-row gap-3 items-start sm:items-center">
                <div class="flex gap-2 items-center w-full sm:w-auto">
                    <input id="searchInput" type="text" placeholder="Buscar usuario..."
                           class="border border-gray-300 rounded-md px-3 py-2 text-sm w-44 focus:ring focus:ring-brandGold focus:border-brandGold transition" />
                    <button id="btnFilter" type="button"
                            class="bg-brandBrown text-white px-3 py-2 rounded-md hover:bg-brandGold transition text-sm flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-1 1h-16a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-1 1h-16a1 1 0 01-1-1v-2zm0 6a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-1 1h-16a1 1 0 01-1-1v-2z"></path>
                        </svg>
                        M√°s filtros
                    </button>
                </div>
                <div class="flex items-center gap-2 mt-2 sm:mt-0">
                    <label for="viewToggle" class="text-sm text-gray-700">Vista</label>
                    <select id="viewToggle" class="border-gray-300 rounded-md text-sm p-1">
                        <option value="table">Tabla</option>
                        <option value="card">Tarjetas</option>
                    </select>
                </div>
                <div class="flex gap-3">
                    <a href="/pages/structure/home.html"
                       class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition text-sm">
                        ‚Üê Inicio
                    </a>
                    <a href="form.html"
                       class="bg-brandGold text-white px-4 py-2 rounded-lg hover:bg-brandBrown transition text-sm">
                        + Nuevo Usuario
                    </a>
                </div>
            </div>

            <!-- MODAL FILTROS -->
            <div id="filterModal" class="fixed inset-0 bg-black bg-opacity-40 z-50 items-center justify-center hidden">
                <div class="bg-white rounded-xl shadow-lg mx-auto max-w-md w-full p-6 relative flex flex-col gap-4">
                    <button id="closeModal" class="absolute top-2 right-2 text-gray-400 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                    </button>
                    <h2 class="text-xl font-bold text-brandGold mb-2">Filtros avanzados</h2>
                    <!-- Filtro por rol -->
                    <div>
                        <label for="filterRole" class="block text-sm font-medium text-gray-700 mb-1">Rol</label>
                        <select id="filterRole" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="">Todos</option>
                            <option value="ADMIN">Administrador</option>
                            <option value="VENDEDOR">Vendedor</option>
                            <option value="GERENTE">Gerente</option>
                            <option value="TI">TI</option>
                            <option value="CONTABILIDAD">Contabilidad</option>
                            <!-- agrega m√°s si tienes m√°s roles en UserRole -->
                        </select>
                    </div>
                    <!-- Filtro por activo -->
                    <div>
                        <label for="filterActive" class="block text-sm font-medium text-gray-700 mb-1">Usuarios activos</label>
                        <select id="filterActive" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="">Todos</option>
                            <option value="true">Solo activos</option>
                            <option value="false">Solo inactivos</option>
                        </select>
                    </div>
                    <div class="flex justify-end gap-3 mt-4">
                        <button id="btnClearFilter" class="px-4 py-2 text-sm rounded-lg border border-brandGold text-brandGold hover:bg-brandGold hover:text-white transition">Limpiar</button>
                        <button id="btnApplyFilter" class="px-4 py-2 text-sm rounded-lg bg-brandGold text-white hover:bg-brandBrown transition">Aplicar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile card view -->
        <div id="mobileView" class="block md:hidden space-y-4">
            <!-- JS will render mobile cards here -->
        </div>

        <!-- Desktop table view -->
        <div id="desktopView" class="hidden md:block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full">
                    <thead class="bg-gray-50 border-b border-gray-200">
                    <tr>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Usuario</th>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Roles</th>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Activo</th>
                        <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                    </tr>
                    </thead>
                    <tbody id="usuarioTable" class="bg-white divide-y divide-gray-200">
                    <!-- JS renderiza filas -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Estado vac√≠o -->
        <div id="emptyState" class="hidden text-center py-16">
            <div class="text-gray-400 text-5xl mb-4">üë§</div>
            <h3 class="text-lg font-semibold text-gray-700 mb-2">
                No hay usuarios registrados
            </h3>
            <p class="text-gray-500 mb-6 text-sm">
                Comienza agregando tu primer usuario
            </p>
            <a href="form.html"
               class="bg-brandGold text-white px-6 py-3 rounded-lg hover:bg-brandBrown transition inline-block text-sm">
                Agregar Usuario
            </a>
        </div>
    </div>
</main>

<script src="/js/structure/sidebarloader.js"></script>
<div id="onboardingMsg" class="hidden fixed bottom-4 right-4 bg-white border rounded-lg shadow-lg p-4 text-sm max-w-xs z-40">
    <p class="mb-3">Usa el bot√≥n <strong>+ Nuevo Usuario</strong> para registrar tu primer usuario. Puedes cambiar la vista con el selector <strong>Vista</strong>.</p>
    <button class="bg-brandGold text-white px-3 py-1 rounded w-full" onclick="dismissOnboarding()">Entendido</button>
</div>
<div id="loadingOverlay" class="hidden fixed inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50">
    <div class="animate-spin h-10 w-10 border-4 border-brandGold border-t-transparent rounded-full"></div>
</div>
</body>
</html>